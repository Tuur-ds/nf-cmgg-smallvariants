Changes in module 'nf-core/ensemblvep'
--- modules/nf-core/ensemblvep/build.sh
+++ modules/nf-core/ensemblvep/build.sh
@@ -20,11 +20,9 @@
     docker push nfcore/vep:${VEP_VERSION}.${GENOME}
 }
 
-build_push "CanFam3.1" "canis_lupus_familiaris"   "104" "108.2"
-build_push "GRCh37"    "homo_sapiens"             "108" "108.2"
-build_push "GRCh38"    "homo_sapiens"             "108" "108.2"
-build_push "GRCm38"    "mus_musculus"             "102" "108.2"
-build_push "GRCm39"    "mus_musculus"             "108" "108.2"
-build_push "R64-1-1"   "saccharomyces_cerevisiae" "108" "108.2"
-build_push "UMD3.1"    "bos_taurus"               "94"  "108.2"
-build_push "WBcel235"  "caenorhabditis_elegans"   "108" "108.2"
+build_push "GRCh37"    "homo_sapiens"           "105" "105.0"
+build_push "GRCh38"    "homo_sapiens"           "105" "105.0"
+build_push "GRCm38"    "mus_musculus"           "105" "105.0"
+build_push "GRCm39"    "mus_musculus"           "105" "105.0"
+build_push "CanFam3.1" "canis_lupus_familiaris" "105" "105.0"
+build_push "WBcel235"  "caenorhabditis_elegans" "105" "105.0"

--- modules/nf-core/ensemblvep/main.nf
+++ modules/nf-core/ensemblvep/main.nf
@@ -2,10 +2,10 @@
     tag "$meta.id"
     label 'process_medium'
 
-    conda (params.enable_conda ? "bioconda::ensembl-vep=108.2" : null)
+    conda (params.enable_conda ? "bioconda::ensembl-vep=105.0" : null)
     container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://depot.galaxyproject.org/singularity/ensembl-vep:108.2--pl5321h4a94de4_0' :
-        'quay.io/biocontainers/ensembl-vep:108.2--pl5321h4a94de4_0' }"
+        'https://depot.galaxyproject.org/singularity/ensembl-vep:105.0--pl5321h4a94de4_1' :
+        'quay.io/biocontainers/ensembl-vep:105.0--pl5321h4a94de4_1' }"
 
     input:
     tuple val(meta), path(vcf)
@@ -17,9 +17,9 @@
     path  extra_files
 
     output:
-    tuple val(meta), path("*.vcf.gz")  , optional:true, emit: vcf
-    tuple val(meta), path("*.tab.gz")  , optional:true, emit: tab
-    tuple val(meta), path("*.json.gz") , optional:true, emit: json
+    tuple val(meta), path("*.ann.{vcf,vcf.gz}")     , optional:true, emit: vcf
+    tuple val(meta), path("*.ann.{tab,tab.gz}")     , optional:true, emit: tab
+    tuple val(meta), path("*.ann.{json,json.gz}")   , optional:true, emit: json
     path "*.summary.html"                  , emit: report
     path "versions.yml"                    , emit: versions
 
@@ -29,7 +29,7 @@
     script:
     def args = task.ext.args ?: ''
     def file_extension = args.contains("--vcf") ? 'vcf' : args.contains("--json")? 'json' : args.contains("--tab")? 'tab' : 'vcf'
-    def compress_cmd = args.contains("--compress_output") ? '' : '--compress_output bgzip'
+    def compress_out = args.contains("--compress_output") ? '.gz' : ''
     def prefix = task.ext.prefix ?: "${meta.id}"
     def dir_cache = cache ? "\${PWD}/${cache}" : "/.vep"
     def reference = fasta ? "--fasta $fasta" : ""
@@ -37,9 +37,8 @@
     """
     vep \\
         -i $vcf \\
-        -o ${prefix}.${file_extension}.gz \\
+        -o ${prefix}.ann.${file_extension}${compress_out} \\
         $args \\
-        $compress_cmd \\
         $reference \\
         --assembly $genome \\
         --species $species \\

--- modules/nf-core/ensemblvep/environment.yml
+++ modules/nf-core/ensemblvep/environment.yml
@@ -1,10 +1,10 @@
 # You can use this file to create a conda environment for this module:
 #   conda env create -f environment.yml
-name: nf-core-vep-108.2
+name: nf-core-vep-105.0
 channels:
   - conda-forge
   - bioconda
   - defaults
 
 dependencies:
-  - bioconda::ensembl-vep=108.2
+  - bioconda::ensembl-vep=105.0

--- modules/nf-core/ensemblvep/meta.yml
+++ modules/nf-core/ensemblvep/meta.yml
@@ -50,17 +50,17 @@
       type: file
       description: |
         annotated vcf (optional)
-      pattern: "*.ann.vcf.gz"
+      pattern: "*.ann.vcf"
   - tab:
       type: file
       description: |
         tab file with annotated variants (optional)
-      pattern: "*.ann.tab.gz"
+      pattern: "*.ann.tab"
   - json:
       type: file
       description: |
         json file with annotated variants (optional)
-      pattern: "*.ann.json.gz"
+      pattern: "*.ann.json"
   - report:
       type: file
       description: VEP report file
@@ -71,4 +71,3 @@
       pattern: "versions.yml"
 authors:
   - "@maxulysse"
-  - "@matthdsm"

--- modules/nf-core/ensemblvep/Dockerfile
+++ modules/nf-core/ensemblvep/Dockerfile
@@ -11,8 +11,8 @@
 # Setup default ARG variables
 ARG GENOME=GRCh38
 ARG SPECIES=homo_sapiens
-ARG VEP_CACHE_VERSION=108
-ARG VEP_VERSION=108.2
+ARG VEP_CACHE_VERSION=105
+ARG VEP_VERSION=105.0
 
 # Add conda installation dir to PATH (instead of doing 'conda activate')
 ENV PATH /opt/conda/envs/nf-core-vep-${VEP_VERSION}/bin:$PATH

************************************************************
